/**
 * SplitType
 * https://github.com/lukePeavey/SplitType
 * @version 0.2.3
 * @author Luke Peavey <lwpeavey@gmail.com>
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).SplitType=e()}(this,(function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){return Object.getOwnPropertyNames(Object(t)).reduce((function(n,i){var s=Object.getOwnPropertyDescriptor(Object(t),i),r=Object.getOwnPropertyDescriptor(Object(e),i);return Object.defineProperty(n,i,r||s)}),{})}function i(t){var e=n(t);return(e.types||e.split)&&(e.types=e.types||e.split),(e.absolute||e.position)&&(e.absolute=e.absolute||/absolute/.test(t.position)),e}function s(t){return null!==t&&"object"==typeof t}function r(t){return Array.isArray(t)?t:null==t?[]:function(t){return s(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0}(t.length)}(t)?Array.prototype.slice.call(t):[t]}function o(t){return s(t)&&/^(1|3|11)$/.test(t.nodeType)}function l(t){return"string"==typeof t}function c(t){var e,n=t;return l(t)&&(n=/^(#[a-z]\w+)$/.test(t.trim())?document.getElementById(t.trim().slice(1)):document.querySelectorAll(t)),(e=n,r(e).reduce((function(t,e){return t.concat(r(e))}),[])).filter(o)}function a(t,e,n){var i={},r=null;return s(t)&&(r=t[a.expando]||(t[a.expando]=++a.uid),i=a.cache[r]||(a.cache[r]={})),void 0===n?void 0===e?i:i[e]:void 0!==e?(i[e]=n,n):void 0}function u(t){var e=t&&t[a.expando];e&&(delete t[e],delete a.cache[e])}function h(t,e){for(var n=r(t),i=n.length,s=0;s<i;s++)e(n[s],s,n)}function p(t,e){var n=document.createElement(t);return e?(Object.keys(e).forEach((function(t){var i=e[t];null!==i&&("textContent"===t||"innerHTML"===t?n[t]=i:"children"===t?h(i,(function(t){o(t)&&n.appendChild(t)})):n.setAttribute(t,String(i).trim()))})),n):n}a.expando="splitType".concat(1*new Date),a.cache={},a.uid=0;var d={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:"lines, words, chars",absolute:!1,tagName:"div"},f=function(){return document.createDocumentFragment()},y=function(t){return document.createTextNode(t)};function g(t,e){var i,s,r=function(t){var e=l(t)||Array.isArray(t)?String(t):"";return{lines:/line/i.test(e),words:/word/i.test(e),chars:/(char)|(character)/i.test(e)}}((e=n(d,e)).types),o=e.tagName,c="B".concat(1*new Date,"R"),u="absolute"===e.position||e.absolute,g=[],m=[];if(s=r.lines?p("div"):f(),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return(t=t?String(t):"").split(e)}(function(t,e){var n=t.textContent;if(e){var i=t.innerHTML,s=document.createElement("div");s.innerHTML=i.replace(/<br\s*\/?>/g," ".concat(e," ")),n=s.textContent}return n.replace(/\s+/g," ").trim()}(t,c)).reduce((function(t,n,i,l){var a,u;return n===c?(s.appendChild(p("br")),t):(r.chars&&(u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t=null==t?"":String(t)).split(e)}(n).map((function(t){return p(o,{class:"".concat(e.splitClass," ").concat(e.charClass),style:"display: inline-block;",textContent:t})})),m=m.concat(u)),r.words||r.lines?(a=p(o,{class:"".concat(e.wordClass," ").concat(e.splitClass),style:"display: inline-block; position: ".concat(r.words?"relative":"static"),children:r.chars?u:null,textContent:r.chars?null:n}),s.appendChild(a)):h(u,(function(t){s.appendChild(t)})),i!==l.length-1&&s.appendChild(y(" ")),r.words?t.concat(a):t)}),[]),t.innerHTML="",t.appendChild(s),!u&&!r.lines)return{chars:m,words:i,lines:[]};var w,v,b,C,x,T=[],E=[],S=a(t,"nodes",t.getElementsByTagName(o)),O=t.parentElement,j=t.nextElementSibling,H=window.getComputedStyle(t).textAlign;return u&&(C={left:s.offsetLeft,top:s.offsetTop,width:s.offsetWidth},b=t.offsetWidth,v=t.offsetHeight,a(t).cssWidth=t.style.width,a(t).cssHeight=t.style.height),h(S,(function(t){if(t!==s){var e,n=t.parentElement===s;r.lines&&n&&((e=a(t,"top",t.offsetTop))!==x&&(x=e,T.push(E=[])),E.push(t)),u&&(a(t).top=e||t.offsetTop,a(t).left=t.offsetLeft,a(t).width=t.offsetWidth,a(t).height=w||(w=t.offsetHeight))}})),O&&O.removeChild(t),r.lines&&(s=f(),g=T.map((function(t){var n=p(o,{class:"".concat(e.splitClass," ").concat(e.lineClass),style:"display: block; text-align: ".concat(H,"; width: 100%;")});return s.appendChild(n),u&&(a(n).type="line",a(n).top=a(t[0]).top,a(n).height=w),h(t,(function(t,e,i){r.words?n.appendChild(t):r.chars?h(t.children,(function(t){n.appendChild(t)})):n.appendChild(y(t.textContent)),e!==i.length-1&&n.appendChild(y(" "))})),n})),t.replaceChild(s,t.firstChild)),u&&(t.style.width="".concat(t.style.width||b,"px"),t.style.height="".concat(v,"px"),h(S,(function(t){var e="line"===a(t).type,n=!e&&"line"===a(t.parentElement).type;t.style.top="".concat(n?0:a(t).top,"px"),t.style.left="".concat(e?C.left:a(t).left-(n?C.left:0),"px"),t.style.height="".concat(a(t).height,"px"),t.style.width="".concat(e?C.width:a(t).width,"px"),t.style.position="absolute"}))),O&&(j?O.insertBefore(t,j):O.appendChild(t)),{lines:g,words:r.words?i:[],chars:m}}var m=n(d,{});return function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isSplit=!1,this.settings=n(m,i(s)),this.elements=c(e)||[],this.elements.length&&(this.originals=this.elements.map((function(t){return a(t,"html",a(t).html||t.innerHTML)})),this.settings.types&&this.split())}return e(t,null,[{key:"defaults",get:function(){return m},set:function(t){m=n(m,i(t))}}]),e(t,[{key:"split",value:function(t){var e=this;this.revert(),this.lines=[],this.words=[],this.chars=[];var s=[window.pageXoffset,window.pageYoffset];void 0!==t&&(this.settings=n(this.settings,i(t))),this.elements.forEach((function(t){var n=g(t,e.settings),i=n.lines,s=n.words,r=n.chars;e.lines=e.lines.concat(i),e.words=e.words.concat(s),e.chars=e.chars.concat(r),a(t).isSplit=!0})),this.isSplit=!0,window.scrollTo(s[0],s[1]),this.elements.forEach((function(t){r(a(t).nodes||[]).forEach(u)}))}},{key:"revert",value:function(){var t=this;this.isSplit&&(this.lines=null,this.words=null,this.chars=null),this.elements.forEach((function(e){a(e).isSplit&&a(e).html&&(e.innerHTML=a(e).html,e.style.height=a(e).cssHeight||"",e.style.width=a(e).cssWidth||"",t.isSplit=!1)}))}}]),t}()}));
